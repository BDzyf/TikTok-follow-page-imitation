# TikTok-follow-page-imitation
ç¬¬ä¸€å±Šå­—èŠ‚è·³åŠ¨å·¥ç¨‹è®­ç»ƒè¥å®¢æˆ·ç«¯æ–¹å‘ç¬¬ä¸€æ¬¡ä½œä¸šï¼Œä¸€ä¸ªé«˜åº¦è¿˜åŸæŠ–éŸ³å…³æ³¨é¡µé¢çš„ Android åº”ç”¨ï¼ŒåŸºäºç°ä»£ Android æ¶æ„ç»„ä»¶å¼€å‘ï¼Œå®ç°äº†å…³æ³¨åˆ—è¡¨ç®¡ç†ã€ç‰¹åˆ«å…³æ³¨ã€å¤‡æ³¨è®¾ç½®ã€å–æ¶ˆå…³æ³¨ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œå…·å¤‡ä¼˜ç§€çš„æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚
## é¡¹ç›®æ¼”ç¤º
https://github.com/user-attachments/assets/853926ce-acce-4639-8435-456e6fa3365b
## å­¦ä¹ æ€»ç»“
https://ucnsofts44q8.feishu.cn/wiki/DXWXwntqEiDLfjkStbkcUM94njc
## âœ¨ åŠŸèƒ½ç‰¹æ€§

- **å…³æ³¨åˆ—è¡¨**
  - æŒ‰ç‰¹åˆ«å…³æ³¨çŠ¶æ€å’Œæ—¶é—´æ’åºå±•ç¤ºï¼Œä¼˜å…ˆç‰¹åˆ«å…³æ³¨
  - å¤‡æ³¨ä¼˜å…ˆæ˜¾ç¤ºæœºåˆ¶ï¼ˆå¤‡æ³¨ > æ˜µç§°ï¼‰
  - ä¸‹æ‹‰åˆ·æ–°ä¸çŠ¶æ€åŒæ­¥

- **ç”¨æˆ·æ“ä½œ**
  - ä¸€é”®ç‰¹åˆ«å…³æ³¨/å–æ¶ˆ
  - è‡ªå®šä¹‰å¤‡æ³¨è®¾ç½®
  - å…³æ³¨/å–æ¶ˆå…³æ³¨åˆ‡æ¢

- **æ•°æ®æŒä¹…åŒ–**
  - æœ¬åœ°æ•°æ®åº“å­˜å‚¨ï¼ˆRoomï¼‰
  - é¢„ç½®æ•°æ®åº“èµ„æºï¼ˆ`assets/follow_v1.db`ï¼‰
  - è½¯åˆ é™¤æœºåˆ¶ï¼ˆstatus çŠ¶æ€ç®¡ç†ï¼‰

- **é«˜æ€§èƒ½äº¤äº’**
  - RecyclerView + DiffUtil å±€éƒ¨åˆ·æ–°
  - ViewHolder ç¼“å­˜ä¼˜åŒ–
  - è‡ªå®šä¹‰çº¿ç¨‹æ± å¤„ç†æ•°æ®åº“æ“ä½œ
  - Glide åŠ è½½åœ†å½¢å¤´åƒ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

é‡‡ç”¨ **MVVM + Repository** æ¶æ„æ¨¡å¼ï¼Œç¡®ä¿æ•°æ®æµæ¸…æ™°ã€å¯ç»´æŠ¤æ€§å¼ºï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              UI Layer (View)                â”‚
â”‚  FollowFragment â†’ FollowAdapter â†’ ViewHolderâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ViewModel Layer (Repository)        â”‚
â”‚         FollowRepository (æ•°æ®è°ƒåº¦)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Data Layer (Room Database)          â”‚
â”‚  AppDatabase â†’ FollowDao â†’ FollowUser      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ¸å¿ƒè®¾è®¡äº®ç‚¹ï¼š**

- **å•ä¾‹æ¨¡å¼**ï¼šAppExecutorsã€AppDatabase å…¨å±€å•ä¾‹
- **å“åº”å¼æ•°æ®**ï¼šLiveData è‡ªåŠ¨æ›´æ–° UI
- **çº¿ç¨‹éš”ç¦»**ï¼šdiskIO å•çº¿ç¨‹æ± ä¿è¯æ•°æ®åº“æ“ä½œé¡ºåºæ€§
- **æ•°æ®ä¸€è‡´æ€§**ï¼šå”¯ä¸€çº¦æŸï¼ˆdouyinIdï¼‰+ å†²çªæ›¿æ¢ç­–ç•¥

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç”¨é€” |
|------|------|
| **AndroidX Room** | æœ¬åœ°æ•°æ®æŒä¹…åŒ–ï¼ˆSQLite æŠ½è±¡å±‚ï¼‰ |
| **LiveData** | å“åº”å¼æ•°æ®è§‚å¯Ÿä¸ UI æ›´æ–° |
| **RecyclerView + ListAdapter** | é«˜æ•ˆåˆ—è¡¨å±•ç¤ºï¼ˆDiffUtilï¼‰ |
| **Glide** | æœ¬åœ°åœ†å½¢å¤´åƒåŠ è½½ |
| **ViewPager2 + TabLayout** | å¤šæ ‡ç­¾é¡µåˆ‡æ¢ |
| **Material Design** | åº•éƒ¨å¼¹çª—ã€å¼€å…³ç»„ä»¶ |
| **Executors** | è‡ªå®šä¹‰çº¿ç¨‹æ±  |

## ğŸ“ é¡¹ç›®ç»“æ„

```
app/src/main/
â”œâ”€â”€ java/com/demo/follow/
â”‚   â”œâ”€â”€ db/                    # æ•°æ®å±‚
â”‚   â”‚   â”œâ”€â”€ AppDatabase.java  # Room æ•°æ®åº“å®ä¾‹
â”‚   â”‚   â”œâ”€â”€ FollowUser.java   # ç”¨æˆ·å®ä½“ï¼ˆParcelableï¼‰
â”‚   â”‚   â””â”€â”€ FollowDao.java    # æ•°æ®è®¿é—®å¯¹è±¡
â”‚   â”œâ”€â”€ repository/            # ä»“åº“å±‚
â”‚   â”‚   â””â”€â”€ FollowRepository.java
â”‚   â”œâ”€â”€ ui/                    # UI å±‚
â”‚   â”‚   â”œâ”€â”€ FollowFragment.java
â”‚   â”‚   â”œâ”€â”€ FollowAdapter.java
â”‚   â”‚   â”œâ”€â”€ FollowDiffUtil.java
â”‚   â”‚   â”œâ”€â”€ UserActionBottomSheet.java
â”‚   â”‚   â”œâ”€â”€ RelationshipsFragment.java
â”‚   â”‚   â”œâ”€â”€ RelationshipsPagerAdapter.java
â”‚   â”‚   â””â”€â”€ PlaceholderFragment.java
â”‚   â”œâ”€â”€ util/                  # å·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ AppExecutors.java
â”‚   â”‚   â””â”€â”€ AvatarLoader.java
â”‚   â””â”€â”€ MainActivity.java
â”œâ”€â”€ res/
â”‚   â”œâ”€â”€ drawable/             # å½¢çŠ¶ã€å›¾æ ‡èµ„æº
â”‚   â”œâ”€â”€ layout/               # å¸ƒå±€æ–‡ä»¶
â”‚   â””â”€â”€ values/               # é¢œè‰²ã€æ ·å¼ã€å­—ç¬¦ä¸²
â””â”€â”€ assets/
    â””â”€â”€ follow_v1.db         # é¢„ç½®æ•°æ®åº“
```

## ğŸš€ å¦‚ä½•è¿è¡Œ

### ç¯å¢ƒè¦æ±‚
- Android Studio Otter
- JDK 17
- Android SDK API 24

### è¿è¡Œæ­¥éª¤

1. **å…‹éš†ä»“åº“**
   ```bash
   git clone https://github.com/BDzyf/TikTok-follow-page-imitation
   cd TikTok-follow-page-imitation
   ```

2. **ç¼–è¯‘è¿è¡Œ**
   - åœ¨ Android Studio ä¸­æ‰“å¼€é¡¹ç›®
   - ç­‰å¾… Gradle åŒæ­¥å®Œæˆ
   - ç‚¹å‡» â–¶ Run è¿è¡Œåˆ°æ¨¡æ‹Ÿå™¨/çœŸæœº

3. **æŸ¥çœ‹æ•ˆæœ**
   - é»˜è®¤æ˜¾ç¤º"äº’å…³"æ ‡ç­¾é¡µ
   - å³æ»‘æŸ¥çœ‹æ›´å¤šæ ‡ç­¾é¡µï¼ˆå…³æ³¨ã€ç²‰ä¸ã€æœ‹å‹ï¼‰

## ğŸ“‹ ä»£ç è§„èŒƒä¸è®¾è®¡äº®ç‚¹

### 1. èµ„æºå‘½åè§„èŒƒ
- å¸ƒå±€æ–‡ä»¶ï¼š`fragment_*.xml`, `item_*.xml`, `dialog_*.xml`, `sheet_*.xml`
- å›¾æ ‡ï¼š`ic_*.xml`ï¼ˆè¯­ä¹‰åŒ–å‘½åï¼‰
- èƒŒæ™¯ï¼š`bg_*.xml`ï¼ˆé¢œè‰²ã€åœ†è§’ç»Ÿä¸€ï¼‰

### 2. å¸¸é‡ç»Ÿä¸€ç®¡ç†
```java
// åœ¨ UserActionBottomSheet ä¸­
private static final String DEFAULT_REMARK_HINT = "è®¾ç½®å¤‡æ³¨";
private static final String DIALOG_TAG = "user_action";
```
### 3. æ€§èƒ½ä¼˜åŒ–
- `recyclerView.setItemViewCacheSize(20)`ï¼šç¼“å­˜ 20 ä¸ª Item
- `viewPager.setOffscreenPageLimit(3)`ï¼šé¢„åŠ è½½ 3 é¡µ
- Glide åœ†å½¢è£å‰ª + å ä½å›¾

## ğŸ”§ æ‰©å±•æ€§è¯´æ˜

æœ¬æ¶æ„æ”¯æŒä»¥ä¸‹æ‰©å±•ï¼š

1. **å¤šç»´åº¦æ’åº**
   ```java
   // FollowDao.java
   @Query("SELECT * FROM follow ORDER BY followTime ASC") // æŒ‰æ—¶é—´å‡åº
   LiveData<List<FollowUser>> getAllFollowByTimeAsc();
   ```

2. **æ–°å¢ç­›é€‰æ¡ä»¶**
   ```java
   @Query("SELECT * FROM follow WHERE status = 1 AND isSpecial = 1")
   LiveData<List<FollowUser>> getSpecialFollows();
   ```

3. **ç½‘ç»œæ•°æ®æº**
   ```java
   // Repository ä¸­å¢åŠ ç½‘ç»œè¯·æ±‚
   public void syncFromNetwork() {
       execute(() -> {
           List<FollowUser> remote = api.getFollows();
           dao.insertAll(remote);
       });
   }
   ```

4. **åˆ†é¡µåŠ è½½**
   - å°† `ListAdapter` æ”¹ä¸º `PagingDataAdapter`
   - Room æ”¯æŒ Paging 3.0

## ğŸ“Œ æ³¨æ„äº‹é¡¹

- **é¢„ç½®æ•°æ®åº“**ï¼šé¡¹ç›®ä¾èµ– `assets/follow_v1.db`ï¼Œé¦–æ¬¡è¿è¡Œéœ€ç¡®ä¿æ–‡ä»¶å­˜åœ¨
- **å¤´åƒèµ„æº**ï¼šå¤´åƒè·¯å¾„æ ¼å¼ä¸º `assets/avatars/xxx.jpg`ï¼Œéœ€è‡ªè¡Œå‡†å¤‡
---

> **è¯´æ˜**ï¼šæœ¬ Demo ä¸ºå­¦ä¹ é¡¹ç›®ï¼Œæ•°æ®å‡ä¸ºæœ¬åœ°æ¨¡æ‹Ÿï¼Œä¸æ¶‰åŠä»»ä½•çœŸå®æŠ–éŸ³ API è°ƒç”¨å’Œæ•°æ®éšç§é—®é¢˜ã€‚
